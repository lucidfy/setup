#!/bin/sh
docker pull daison12006013/lucid
docker container rm -f lucid-container
# | detach
# | ports        [host <- guest]:
#     lucid      [8330 <- 8080]
#     sveltekit  [8331 <- 8081]
#     docs       [8332 <- 8082]
# | container name to "lucid-container" from daison12006013/lucid image
# | mount current folder to container's /app folder
docker run -v $(PWD):/app -d -p 8330:8080 -p 8331:8081 -p 8332:8082 --name lucid-container daison12006013/lucid

# re-build again after mounting the folder to sync the files
docker exec -it lucid-container sh -c "sh ./setup/scripts/install-reflex.sh && exit"
docker exec -it lucid-container sh -c "sh ./setup/scripts/check-binaries.sh && exit"
docker exec -it lucid-container sh -c "sh ./setup/scripts/build-go.sh && exit"
docker exec -it lucid-container sh -c "sh ./setup/scripts/build-svelte.sh && exit"
